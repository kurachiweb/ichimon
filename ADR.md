# Ichimon Architecture Decision Records もどき

## 2022-02-12
バックエンドにはGolang、フレームワークにはGinを採用と決める。
業務で使っている組み合わせであり、特に不満を感じていないため。
PHPも検討したが、Goの方が簡単にテストを書けること、一般的に実行速度が速いことなど、多くのメリットがあると感じた。
Goは静的型付け言語なので、開発していて直ぐにエラーに気付ける。

## 2022-02-13
フロントエンドにVue+Nuxt.jsを検討している。
機能要件として、部分的に静的コンテンツとして読み込みたい。
client-onlyやNuxt3新登場のISGで実現できなさそうなら、React+Next.jsにするかも。
業務ではVue CLI(v2)を使っている。同じVue系統でも、学習コストは意外に高い？

## 2022-02-27
XServerでGoが動かず、試行錯誤を繰り返しても進展がなかった。
予算の都合上、AWSやGCPのような従量課金BaaSで請求爆発を起こす懸念が大きい。
そのためXServerは使い続け、GoではなくPHP8に変更する。
予算がもう少しあれば絶対に取り得ない選択肢であることは、重々承知。
フロントエンドでは、Vue3対応のVuetifyがまだAlpha版であるため、
Vue CLI2, TypeScript, Vuetify、実務と同じ構成を使う。

## 2022-04-16
先に全画面のデザインを作ってからだと、アプリケーション設計も考えやすそう。

## 2022-04-24
Eloquent、where+updateによるレコード更新ではcastが呼ばれず入力値のままになってしまう。
→find+saveで解決。Eloquentを捨てずに済んだ。

## 2022-04-25
form(v-form)はコンポーネント内に書かず、ビューにだけ書いてみる。吉か凶か。
→type="password"はformの子孫要素でないとコンソールに警告が出てしまう。
v-formの中にしかコンポーネントを置いてはいけないというルールにするくらいなら、v-formもコンポーネント内に書く。

## 2022-04-29
Vuetifyのテーマカラーをカスタマイズしたところ、.v-application aのcolorが[object Object]になってしまった。
anchorプロパティを指定することで解決できた。

## 2022-05-01
アカウント認証回りの機能を考えてみる
新規登録時、アカウントID・メールアドレスが存在するかチェック
メールアドレスログイン
アカウントIDログイン
同一IPログイン試行回数制限
可能なら2段階認証、メール送信したワンタイムパスワードによる
ログイン成功/失敗時、対象アカウントにメール通知
一定期間経つとログアウト
パスワード再設定リンクを指定ID/メールアドレスのアカウントにメール送信
アカウント削除後、一定期間なら復元できる